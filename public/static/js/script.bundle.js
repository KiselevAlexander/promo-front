!function e(t,r,n){function a(i,u){if(!r[i]){if(!t[i]){var l="function"==typeof require&&require;if(!u&&l)return l(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var s=r[i]={exports:{}};t[i][0].call(s.exports,function(e){var r=t[i][1][e];return a(r?r:e)},s,s.exports,e,t,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("react"),c=n(l),s=e("react-router"),f=function(){},d=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return c["default"].createElement(s.Router,{history:s.browserHistory,onUpdate:f},this.props.routes())}}]),t}(c["default"].Component);d.propTypes={routes:c["default"].PropTypes.func},d.defaultProps={routes:function(){}},r["default"]=d},{react:void 0,"react-router":void 0}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});{var n=r.SET_BUSY="SET_BUSY";r.setBusyState=function(){return function(e){return e({type:n})}}}},{}],3:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.App=void 0;{var a=e("react"),o=n(a),i=e("react-redux"),u=e("./store"),l=n(u),c=e("./Root"),s=n(c),f=e("./routes"),d=n(f),p=function(){};r.App=function(){return o["default"].createElement(i.Provider,{store:l["default"]},o["default"].createElement(s["default"],{routes:d["default"],onEnter:p(l["default"])}))}}},{"./Root":1,"./routes":18,"./store":19,react:void 0,"react-redux":void 0}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("react"),c=n(l),s=e("classnames"),f=n(s),d=e("react-dropzone"),p=n(d),m=e("promise-file-reader"),h=(e("react-router"),function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.defineProperty(r,"onImagePick",{enumerable:!0,writable:!0,value:function(e){console.log(e),m.readAsDataURL(e[0]).then(function(e){r.setState({imageSrc:e,showCase:!1})})}}),Object.defineProperty(r,"doCreateVideo",{enumerable:!0,writable:!0,value:function(){r.setState({showCase:!0})}}),r.state={imageSrc:"",status:"",result:{}},r}return i(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.state,r=t.imageSrc,n=t.status,a=t.showCase,o=t.isVideoLayerVisible,i=t.currentTime;return c["default"].createElement("main",null,c["default"].createElement("table",{style:{width:"100%"}},c["default"].createElement("tr",null,c["default"].createElement("td",{style:{verticalAlign:"top"}},c["default"].createElement(p["default"],{onDrop:this.onImagePick,disabled:"Pending"===n},"Pick file please"),r&&c["default"].createElement("button",{onClick:this.doCreateVideo,disabled:"Pending"===n},"Create video")),c["default"].createElement("td",{style:{verticalAlign:"top"}},r&&!a&&c["default"].createElement("img",{src:r,alt:"",style:{maxWidth:"100%"}}),a&&c["default"].createElement("div",{className:"case"},c["default"].createElement("video",{ref:function(t){e.videoPlayer=t}},c["default"].createElement("source",{src:"/static/video_patterns/3.mp4",type:"video/mp4"})),c["default"].createElement("div",{className:f["default"]("layer",{"is-visible":o}),style:{backgroundImage:"url('"+r+"')"}}),c["default"].createElement("button",{onClick:function(){e.videoPlayer.play();var t={start:3,end:10},r=setInterval(function(){console.dir(e.videoPlayer),e.setState({currentTime:e.videoPlayer.currentTime}),e.videoPlayer.currentTime>t.start&&e.videoPlayer.currentTime<t.end&&!o?(e.setState({isVideoLayerVisible:!0}),console.log("show")):(e.setState({isVideoLayerVisible:!1}),console.log("hide")),e.videoPlayer.currentTime>=e.videoPlayer.duration&&clearInterval(r)},500)}},"play"),c["default"].createElement("div",{className:"seek"},i))))))}}]),t}(c["default"].Component));r["default"]=h},{classnames:void 0,"promise-file-reader":void 0,react:void 0,"react-dropzone":void 0,"react-router":void 0}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("react"),c=n(l),s=e("../../managers/request"),f=e("../../consts"),d=e("./steps/patterns"),p=n(d),m=e("./steps/imagePicker"),h=n(m),v=e("./steps/progess"),b=n(v),g=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.defineProperty(r,"doCreateVideo",{enumerable:!0,writable:!0,value:function(){r.setState({status:"Pending"});var e=r.state.pattern,t={name:"User",image:r.state.image};s.request.post(f.API_BASE_URL+"/createsession",t).then(function(e){return e.json()}).then(function(e){return console.log(e),localStorage.setItem("vid",e.session),r.setState({status:"Generating video: "+e.session}),e.session}).then(function(t){return s.request.put(f.API_BASE_URL+"/start",{session:t,pattern:e})}).then(function(e){return e.json()}).then(function(e){console.log(e),r.getProggressStatus(e.session)})["catch"](function(e){console.error(e),r.setState({status:"Error crating video"})})}}),Object.defineProperty(r,"getProggressStatus",{enumerable:!0,writable:!0,value:function(e){s.request.post(f.API_BASE_URL+"/getstatus",{session:e}).then(function(e){return e.json()}).then(function(t){switch(console.log(t),r.setState(function(){return{percent:t.perc}}),t.status){case 2:setTimeout(function(){r.getProggressStatus(e)},500);break;case 3:r.setState({sessionLinkID:e});break;default:alert("Error")}})["catch"](function(){r.setState({status:"Error crating video"})})}}),Object.defineProperty(r,"onImageSelect",{enumerable:!0,writable:!0,value:function(e){console.log(e),r.setState({step:2,image:e},function(){r.doCreateVideo()})}}),Object.defineProperty(r,"stepBackClickHandler",{enumerable:!0,writable:!0,value:function(){r.setState(function(e){return{step:e.step-1}})}}),r.state={step:0,image:"",status:"",result:{},percent:null,sessionLinkID:null,pattern:1},r}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this.getProggressStatus()}},{key:"render",value:function(){var e=this,t=this.state,r=t.step,n=t.percent,a=t.sessionLinkID;return c["default"].createElement("main",null,0===r&&c["default"].createElement(p["default"],{onChange:function(t){e.setState({step:1,pattern:t})}}),1===r&&c["default"].createElement(h["default"],{onSelect:this.onImageSelect,onStepBackClick:this.stepBackClickHandler}),2===r&&c["default"].createElement(b["default"],{percent:n,session:a}))}}]),t}(c["default"].Component);r["default"]=g},{"../../consts":13,"../../managers/request":15,"./steps/imagePicker":6,"./steps/patterns":7,"./steps/progess":8,react:void 0}],6:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("react"),c=n(l),s=e("jquery"),f=n(s),d=e("classnames"),p=n(d),m=e("react-dropzone"),h=n(m),v=e("promise-file-reader"),b=e("react-nouislider"),g=n(b),y=e("react-konva"),E=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.defineProperty(r,"resizeHandler",{enumerable:!0,writable:!0,value:function(){clearTimeout(r.timer),r.timer=setTimeout(function(){console.log("resize"),r.setState({width:2*f["default"](".imageCroper").width(),canvasHeight:1080/(1920/f["default"](".imageCroper").width())*2})},150)}}),Object.defineProperty(r,"patternClickHandler",{enumerable:!0,writable:!0,value:function(e){r.setState({currentPatternId:e})}}),Object.defineProperty(r,"onImagePick",{enumerable:!0,writable:!0,value:function(e){v.readAsDataURL(e[0]).then(function(e){var t=new window.Image;t.src=e,t.onload=function(){var n=f["default"](".imageCroper");r.setState({image:t,imageSrc:e,width:2*n.width(),height:t.height/(t.width/n.width())*2,canvasHeight:1080/(1920/f["default"](".imageCroper").width())*2,iX:0,iY:0,scale:100})}})["catch"](function(e){console.error(e),alert("Ошибка чтения изображения. Попробуйте еще раз")})}}),Object.defineProperty(r,"nextStep",{enumerable:!0,writable:!0,value:function(){var e=f["default"]("canvas")[0],t=e.toDataURL("image/jpeg");r.props.onSelect(t)}}),Object.defineProperty(r,"scaleChangeHandler",{enumerable:!0,writable:!0,value:function(e){console.log(e),r.setState(function(){return{scale:e[0],iX:0,iY:0}}),console.log(r.image)}}),Object.defineProperty(r,"rotateLeft",{enumerable:!0,writable:!0,value:function(){var e=r.state.rotate-90;r.setState(function(t){return{rotate:360===Math.abs(e)?0:e,width:t.height,height:t.width}})}}),Object.defineProperty(r,"rotateRight",{enumerable:!0,writable:!0,value:function(){var e=r.state.rotate+90;r.setState(function(){return{rotate:360===Math.abs(e)?0:e,iX:0,iY:0}})}}),Object.defineProperty(r,"setEditorRef",{enumerable:!0,writable:!0,value:function(e){r.editor=e}}),Object.defineProperty(r,"textChangeHandler",{enumerable:!0,writable:!0,value:function(e){r.setState({text:e.target.value})}}),r.state={currentPatternId:1,width:100,height:100,scale:100,rotate:0,text:"Some text",image:null,iX:0,iY:0},r.timer=0,r}return i(t,e),u(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeHandler);var e=f["default"](".imageCroper");console.log(e.width()),this.setState({width:e.width(),height:1080/(1920/e.width())})}},{key:"render",value:function(){var e=this,t=this.state,r=t.image,n=(t.imageSrc,t.status),a=t.width,o=t.height,i=t.canvasHeight,u=t.scale,l=(t.rotate,t.text),s=t.iX,f=t.iY,d=r?r.width:0,m=r?r.height:0,v=this;return c["default"].createElement("div",{className:"grid-2 tablet-1 phablet-1 phone-1 float"},c["default"].createElement("div",{className:"col"},c["default"].createElement("h3",{className:"mt-30"},"ЗАГРУЗИТЕ ВАШЕ ФОТО"),c["default"].createElement(h["default"],{className:"btn",onDrop:this.onImagePick,disabled:"Pending"===n},"Загрузить фото"),n&&c["default"].createElement("div",null,"Status: ",n)),c["default"].createElement("div",{className:"col right"},c["default"].createElement("div",{className:"imageHolder"},!r&&c["default"].createElement("img",{src:"/static/img/pic011.jpg",alt:"",className:"bordered"}),c["default"].createElement("div",{className:p["default"]("imageCroper",{"is-visible":r})},c["default"].createElement("div",{className:"canvas",style:{height:i/2}},c["default"].createElement(y.Stage,{width:a,height:i},c["default"].createElement(y.Layer,{reg:this.setEditorRef},c["default"].createElement(y.Image,{ref:function(t){e.image=t},image:r,scale:{x:.01*u,y:.01*u},width:d>m&&a>d?d/(m/o):a,height:m>d&&m>o?m/(d/a):o,x:s,y:f,draggable:!0,dragBoundFunc:function(e){var t=.01*u,r=e.x,n=e.y;return n=i-this.getHeight()*t<e.y?e.y<0?e.y:0:i-this.getHeight()*t,r=a-this.getWidth()*t<e.x?e.x<0?e.x:0:a-this.getWidth()*t,v.setState({iX:r,iY:n}),{x:r,y:n}}}),c["default"].createElement(y.Text,{y:i/100*80,x:50,fontSize:"36",fill:"#fff",text:l})))),c["default"].createElement(g["default"],{range:{min:100,max:200},start:[u],onChange:this.scaleChangeHandler})))),r&&c["default"].createElement("div",{className:"col imageSettings"},c["default"].createElement("h3",{className:"mt-30"},"НАПИШИТЕ ВАШУ МЕЧТУ"),c["default"].createElement("input",{type:"text",placeholder:"Image text",onChange:this.textChangeHandler,value:l}),c["default"].createElement("button",{className:"btn",onClick:this.props.onStepBackClick},"Вернуться"),c["default"].createElement("button",{className:"btn ml-15",onClick:this.nextStep,disabled:"Pending"===n},"Продолжить")))}}]),t}(c["default"].Component);Object.defineProperty(E,"defaultProps",{enumerable:!0,writable:!0,value:{onStepBackClick:function(){}}}),r["default"]=E},{classnames:void 0,jquery:void 0,"promise-file-reader":void 0,react:void 0,"react-dropzone":void 0,"react-konva":void 0,"react-nouislider":void 0}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("react"),c=n(l),s=e("classnames"),f=n(s),d=e("react-html5video"),p=[{id:1,image:"/static/img/photo001.jpg"},{id:2,image:"/static/img/photo001.jpg"},{id:3,image:"/static/img/photo001.jpg"},{id:1,image:"/static/img/photo001.jpg"},{id:2,image:"/static/img/photo001.jpg"},{id:3,image:"/static/img/photo001.jpg"},{id:1,image:"/static/img/photo001.jpg"}],m=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.defineProperty(r,"patternClickHandler",{enumerable:!0,writable:!0,value:function(e){r.setState(function(t){return{currentPatternId:r.state.patterns[e].id,pattens:t.patterns.map(function(t,r){return t.active=r===e,t})}})}}),Object.defineProperty(r,"doneClickHandler",{enumerable:!0,writable:!0,value:function(){r.props.onChange(r.state.currentPatternId)}}),r.state={currentPatternId:0,patterns:p},r}return i(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.state,r=t.patterns,n=t.currentPatternId;return c["default"].createElement("div",{className:"patterns grid-2 tablet-2 phablet-1 phone-1 flex"},c["default"].createElement("div",{className:"col left-side relative"},c["default"].createElement("ul",{className:"list relative"},r.map(function(t,r){return c["default"].createElement("li",{key:r,className:f["default"]("circle circle"+(r+2),{active:t.active}),style:{backgroundImage:"url('"+t.image+"')"},onClick:function(){e.patternClickHandler(r)}})}),c["default"].createElement("li",{className:"circle circle9 phablet-hide"}),c["default"].createElement("li",{className:"circle circle10 phablet-hide"}),c["default"].createElement("li",{className:"circle circle11 phablet-hide"}),c["default"].createElement("li",{className:"circle circle12 phablet-hide"})),c["default"].createElement("button",{className:"btn action",onClick:this.doneClickHandler,disabled:0===n},0===n?"Выберите стиль видео":"Продолжить")),c["default"].createElement("div",{className:"col flex-middle-content"},c["default"].createElement("div",{className:"videoHolder"},0===n&&c["default"].createElement("img",{src:"/static/img/pic011.jpg",alt:""}),1===n&&c["default"].createElement(d.DefaultPlayer,{autoPlay:!1,controls:["PlayPause","Seek","Time","Volume","Fullscreen"],onCanPlayThrough:function(){}},c["default"].createElement("source",{src:"/patterns/pattern-1.mp4",type:"video/mp4"})),2===n&&c["default"].createElement(d.DefaultPlayer,{autoPlay:!1,controls:["PlayPause","Seek","Time","Volume","Fullscreen"],onCanPlayThrough:function(){}},c["default"].createElement("source",{src:"/patterns/pattern-2.mp4",type:"video/mp4"})),3===n&&c["default"].createElement(d.DefaultPlayer,{autoPlay:!1,controls:["PlayPause","Seek","Time","Volume","Fullscreen"],onCanPlayThrough:function(){}},c["default"].createElement("source",{src:"/patterns/pattern-3.mp4",type:"video/mp4"})))))}}]),t}(c["default"].Component);r["default"]=m},{classnames:void 0,react:void 0,"react-html5video":void 0}],8:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("react"),c=n(l),s=e("react-router"),f=e("react-circular-progressbar"),d=n(f),p=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.percent,r=e.session;return c["default"].createElement("div",{className:"progess"},!r&&c["default"].createElement("div",{className:"progress-status"},c["default"].createElement(d["default"],{percentage:t})),r&&c["default"].createElement("div",null,c["default"].createElement("div",{className:"success"},c["default"].createElement("h1",null,"ВАШЕ ВИДЕО ГОТОВО!"),c["default"].createElement("ol",null,c["default"].createElement("li",null,"Поделитесь вашим видео в социальных сетях."),c["default"].createElement("li",null,"Собирайте лайки."),c["default"].createElement("li",null,"Выигрывайте пакет страховых услуг для осуществления вашей мечты!"))),"Ссылка на видео: ",c["default"].createElement("br",null),c["default"].createElement(s.Link,{to:"/player/"+r},location.origin+"/player/"+r)))}}]),t}(c["default"].Component);r["default"]=p},{react:void 0,"react-circular-progressbar":void 0,"react-router":void 0}],9:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("react"),c=n(l),s=e("../../consts"),f=e("react-html5video"),d=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={},r}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props.params.videoID;return c["default"].createElement("div",{id:"player"},c["default"].createElement(f.DefaultPlayer,{autoPlay:!1,controls:["PlayPause","Seek","Time","Volume","Fullscreen"],poster:s.STATIC_URL+"/images/"+e+".jpg",onCanPlayThrough:function(){}},c["default"].createElement("source",{src:s.STATIC_URL+"/video/"+e+".mp4",type:"video/mp4"})))}}]),t}(c["default"].Component);r["default"]=d},{"../../consts":13,react:void 0,"react-html5video":void 0}],10:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("react"),c=n(l),s=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return c["default"].createElement("footer",null,c["default"].createElement("div",{className:"wrapper"},c["default"].createElement("div",{className:"grid-2 phone-1 flex"},c["default"].createElement("div",{className:"col flex flex-middle"},c["default"].createElement("a",{href:"http://70.ingos.ru/",target:"_blank",className:"logo"},c["default"].createElement("img",{src:"/static/img/ingos_logo.png",alt:""}))),c["default"].createElement("div",{className:"col flex flex-middle"},c["default"].createElement("div",{className:"share"},c["default"].createElement("ul",null,c["default"].createElement("li",null,c["default"].createElement("span",{className:"ok"})),c["default"].createElement("li",null,c["default"].createElement("span",{className:"vk"})),c["default"].createElement("li",null,c["default"].createElement("span",{className:"fb"})),c["default"].createElement("li",null,c["default"].createElement("span",{className:"tw"}))))))))}}]),t}(c["default"].Component);r["default"]=s},{react:void 0}],11:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("react"),c=n(l),s=e("classnames"),f=(n(s),e("react-router"),e("react-redux")),d=e("./footer"),p=n(d),m=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={showed:!1},r}return i(t,e),u(t,[{key:"render",value:function(){return c["default"].createElement("div",{className:"main-container"},c["default"].createElement("header",{className:"site-header"},c["default"].createElement("div",{className:"wrapper"},c["default"].createElement("div",{className:"logo"},c["default"].createElement("a",{href:"#"},c["default"].createElement("img",{src:"/static/img/logo.png",alt:""}))))),c["default"].createElement("div",{className:"main-block flex-middle-content"},c["default"].createElement("div",{className:"wrapper"},this.props.children)),c["default"].createElement(p["default"],null))}}]),t}(c["default"].Component),h=function(){return{}},v=function(){return{}};r["default"]=f.connect(h,v)(m)},{"./footer":10,classnames:void 0,react:void 0,"react-redux":void 0,"react-router":void 0}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ERROR_TYPES={CONNECTION_REFUSED:"connection_refused",BAD_REQUEST:"bad_request",UNAUTHORIZED:"unauthorized",FORBIDDEN:"forbidden",NOT_FOUND:"not_found",CONFLICT:"conflict",INTERNAL_SERVER_ERROR:"internal_server_error",UNKNOWN:"unknown"}},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.DATE_MASK="DD.MM.YYYY",r.CLIENT_ID="website_client",r.CLIENT_SECRET="nA2REtuw$a-uZ?R3sw&s5A!UW2veDU3U",r.API_BASE_URL="http://144.76.16.119:9000",r.STATIC_URL="http://144.76.16.119",r.API_URLS={}},{}],14:[function(e,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var n=e("react"),a=r(n),o=e("react-dom"),i=r(o);e("moment/locale/ru"),e("core-js/shim");var u=e("./app"),l=function(e){return i["default"].render(a["default"].createElement(e,null),document.getElementById("root"))};l(u.App),t.hot&&t.hot.accept("./app",function(){var t=e("./app").App;l(t)})},{"./app":3,"core-js/shim":void 0,"moment/locale/ru":void 0,react:void 0,"react-dom":void 0}],15:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.request=void 0;{var a=e("lodash"),o=(n(a),e("url")),i=n(o),u=e("crypto-js"),l=(n(u),e("../utils/fetch")),c=n(l),s=e("../utils/cache-manager"),f=(e("../consts"),6e4);r.request={get:function(e,t,r){if(r instanceof Object){var n=r.name||e+":"+JSON.stringify(t),a=r.flag,o=r.lifeTime||f,i=s.cacheManager.getItem(n);return i?Promise.resolve(i):this._request("GET",e,t,null).then(function(e){return s.cacheManager.setItem(n,e,o,a),e})}return this._request("GET",e,t,null)},post:function(e,t){return this._request("POST",e,null,t)},put:function(e,t){return this._request("PUT",e,null,t)},"delete":function(e){return this._request("DELETE",e,null,null)},_request:function(e,t,r,n){var a=new Headers,o=null,u=t;return"GET"===e&&r&&(r={json:JSON.stringify(r)},u=t+i["default"].format({query:r})),"POST"!==e&&"PUT"!==e||!n||(a.append("Content-type","application/json"),o=JSON.stringify(n)),c["default"](u,{headers:a,method:e,body:o})["catch"](l.parseError)}}}},{"../consts":13,"../utils/cache-manager":20,"../utils/fetch":21,"crypto-js":void 0,lodash:void 0,url:void 0}],16:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("redux"),o=e("./main"),i=n(o);r["default"]=a.combineReducers({calls:i["default"]})},{"./main":17,redux:void 0}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../actions/main"),o={isBusy:!1},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],r=t.type,i=t.isBusy;switch(r){case a.SET_BUSY:return n({},e,{isBusy:i});default:return o}};r["default"]=i},{"../actions/main":2}],18:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),o=n(a),i=e("react-router"),u=e("./components/root"),l=n(u),c=e("./components/main"),s=n(c),f=e("./components/player"),d=n(f),p=e("./components/editor"),m=n(p),h=e("./store"),v=n(h),b=function(){},g=function(){return o["default"].createElement(i.Route,{path:"",onEnter:b(v["default"]),component:l["default"]},o["default"].createElement(i.Route,{path:"/"},o["default"].createElement(i.IndexRoute,{component:s["default"]}),o["default"].createElement(i.Route,{path:"/player",component:d["default"]}),o["default"].createElement(i.Route,{path:"/player/:videoID",component:d["default"]}),o["default"].createElement(i.Route,{path:"/editor",component:m["default"]})))};r["default"]=g},{"./components/editor":4,"./components/main":5,"./components/player":9,"./components/root":11,"./store":19,react:void 0,"react-router":void 0}],19:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("redux-thunk"),o=n(a),i=e("redux"),u=e("./reducers"),l=n(u),c=i.createStore(l["default"],i.applyMiddleware(o["default"]));r["default"]=c},{"./reducers":16,redux:void 0,"redux-thunk":void 0}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.cacheManager=void 0;{var n=e("./formatter"),a="crm_";r.cacheManager={setItem:function(e,t,r,n){var o=r?new Date(Date.now()+r):null;localStorage.setItem(a+e,JSON.stringify({expireDate:o,flag:n,data:t}))},getItem:function(e){var t=n.parseJson(localStorage.getItem(a+e));if(!(t instanceof Object))return null;if(!t.expireDate)return t.data;var r=new Date(t.expireDate),o=new Date;return r>o?t.data:null},getByFlag:function(e){return Object.keys(localStorage).filter(function(e){return e.startsWith(a)}).map(function(e){return n.parseJson(localStorage.getItem(e))
}).filter(function(t){return t instanceof Object&&t.flag===e}).map(function(e){return e.data})},removeItem:function(e){localStorage.removeItem(a+e)},removeByFlag:function(e){return Object.keys(localStorage).filter(function(t){if(!t.startsWith(a))return!1;var r=n.parseJson(localStorage.getItem(t));return r instanceof Object&&r.flag===e}).forEach(function(e){return localStorage.removeItem(e)})},removeAll:function(){Object.keys(localStorage).forEach(function(e){e.startsWith(a)&&localStorage.removeItem(e)})},getExpireDate:function(e){var t=n.parseJson(localStorage.getItem(a+e));return t&&t.data&&t.expireDate?new Date(t.expireDate):null},subscribe:function(e,t){window.addEventListener("storage",function(r){r.key===a+e&&t(r)})}}}},{"./formatter":22}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseError=r.parseBody=void 0,e("whatwg-fetch");var n=e("../constants/errorTypes"),a=function(){return fetch.apply(void 0,arguments).then(function(e){if(e.status>=400)throw e;return e})};r["default"]=a;{var o=r.parseBody=function(e){var t=e.headers.get("Content-Type");return t.startsWith("application/json")?e.json():t.startsWith("text/")?e.text():e.blob()};r.parseError=function(e){if(e instanceof Response)return o(e).then(function(t){var r=n.ERROR_TYPES.UNKNOWN;throw 400===e.status?r=n.ERROR_TYPES.BAD_REQUEST:401===e.status?r=n.ERROR_TYPES.UNAUTHORIZED:403===e.status?r=n.ERROR_TYPES.FORBIDDEN:404===e.status?r=n.ERROR_TYPES.NOT_FOUND:409===e.status?r=n.ERROR_TYPES.CONFLICT:e.status>=500&&(r=n.ERROR_TYPES.INTERNAL_SERVER_ERROR),{code:r,data:t}});throw{code:n.ERROR_TYPES.UNKNOWN,data:e}}}},{"../constants/errorTypes":12,"whatwg-fetch":void 0}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.usernameToString=r.addressToString=r.upperCaseName=r.ucfirst=r.parseJson=r.formatPrice=r.formatCardNumber=r.formatNumber=void 0;{var n=e("../consts"),a=r.formatNumber=function(e){return null===e||void 0===e?null:e.toString().replace(/(\d{1})(\d{3})(\d{3})(\d{2})(\d{2})/,"+7 ($2) $3-$4-$5")},o=(r.formatCardNumber=function(e){return e?e.toString().replace(/(\d)(?=(\d{4})+(?!\d))/g,"$1 "):null},r.formatPrice=function(e,t){if(!e)return null;var r=a(e);return r+" "+n.CURRENCIES[t].label},r.parseJson=function(e){try{return JSON.parse(e)}catch(t){return null}},r.ucfirst=function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()});r.upperCaseName=function(e){return e.replace(/[\wа-яА-Я]\S*/g,o)},r.addressToString=function(e){if(!e)return null;if("string"==typeof e)return e;var t=[];return e.city&&t.push(e.city),e.address&&t.push(e.address),t.join(", ")},r.usernameToString=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1;if(!e)return null;var n=t?e.international:e.original;if("undefined"==typeof n)return"";var a=[];return n.name&&a.push(n.name),!r&&n.secondName&&a.push(n.secondName),n.surname&&a.push(n.surname),a.length?a.join(" ").trim():""}}},{"../consts":13}]},{},[14]);